MCU    MIMXRT1021DAG5A
Board  IMXRT1020-EVK
Build  Baremetal using MG_TCPIP stack

	Boot section

	The i.MX-RT1020-EVK board has 8mb of external flash (NOR QSPI).
	In order to make program in this area proper boot, a specific
	procedure/header has to be provided.

	For reference, see SDK examples or Segger sources linked below.

	Todo

	- In list
	c Check: done with remaining issue(s)
	v Done & validated

	c Missing section .boot_hdr in binary -> Partly solved, next is IVT
	    arm-none-eabi-objdump -s nxp-evkmimxrt1020-mip-baremetal.axf | less
	    shows 0x60002000 "Contents of section .text". We should see
	    at 0x60000000 "Contents of section .boot_hdr" FCFB...V........ etc
	c Boot section (link.ld, build) is not complete with regards to
	    QSPI flash program boot/run. We observe JLINK "Invalid flash
	    header" and PC to remain in ROM region (0x0020_0000 - 0x0021
	    _FFFF). A valid header/boot code is provided from Segger for
	    reference example (see below).
	- Flash section (boot/IVT) parly done, check the following issue:
	  "Core did not halt on flash image verification. Assuming faulty
          flash settings." PC remains in ROM region.
	- No section .vectors in flash linker from SDK, but present in this
	    build. Do we bounce back and just need to set IV addres in header ?
	‐ Complete no‐sdk init (peripherals, clocks)
	‐ Complete no‐sdk calls (serial com, gpio)
	- Clean: fsl directory can go. Kept for reference only, until
	    baremetal is complete.

	Caveats

	Wrong flash / IVT boot header can prevent subsequent SWD / Flash
	connections and operations (ie wrong serial link frequency).
	To restart, use the SD card start configuration without a card in
	slot and power up, then switch back to flash. This should have the
	MCU run into ROM code, waiting for the SD card slot.

	DIP Switch configuration SW8 (backside of the EVK)
	  SW8         1_2_3_4
	  QSPI Flash  0-0-1-0
	  SD Card     0-1-1-0

References

	IMXRT1020RM reference manual

	- 9.6.1.2 FlexSPI Serial NOR Flash Boot Operation

	- Segger sources (flash header)

	- Flash header format
	    Website: https://wiki.segger.com/i.MXRT1020

	- link_red.ld linker example from SDK/Redlib

Info

	This example is a Port  work in progress  from the fully functio‐
	nal IDE/semi-SDK based raw MG_TCPIP driver example at https://gi‐
	thub.com/mongoose‐examples/nxp‐evkmimxrt1020‐mip‐baremetal
	
	This example uses the baremetal driver and relies  on  SDK  func‐
	tions to setup peripheral and clocks. It builds under MCU Expres‐
	so.

